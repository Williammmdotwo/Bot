# Athena Trader é¡¹ç›®ç»“æ„

## ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„

```
athena-trader/
â”œâ”€â”€ ğŸ“„ docker-compose.yml          # Dockerç¼–æ’é…ç½®
â”œâ”€â”€ ğŸ“„ requirements.txt           # Pythonä¾èµ–
â”œâ”€â”€ ğŸ“„ .env.template            # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ ğŸ“„ .gitignore              # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ ğŸ“„ PROJECT_STRUCTURE.md     # é¡¹ç›®ç»“æ„è¯´æ˜ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”‚
â”œâ”€â”€ ğŸ“ config/                  # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ base.json           # åŸºç¡€é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ development.json     # å¼€å‘ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ production.json     # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ test.json           # æµ‹è¯•ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ ğŸ“„ docker-daemon.json # Dockeré•œåƒæºé…ç½®
â”‚
â”œâ”€â”€ ğŸ“ src/                     # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ data_manager/       # æ•°æ®ç®¡ç†æœåŠ¡
â”‚   â”œâ”€â”€ ğŸ“ executor/           # æ‰§è¡ŒæœåŠ¡
â”‚   â”œâ”€â”€ ğŸ“ risk_manager/       # é£é™©ç®¡ç†æœåŠ¡
â”‚   â”œâ”€â”€ ğŸ“ strategy_engine/     # ç­–ç•¥å¼•æ“æœåŠ¡
â”‚   â”œâ”€â”€ ğŸ“ utils/              # å·¥å…·æ¨¡å—
â”‚   â””â”€â”€ ğŸ“„ __init__.py
â”‚
â”œâ”€â”€ ğŸ“ frontend/                # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ ğŸ“„ package.json        # Node.jsä¾èµ–
â”‚   â”œâ”€â”€ ğŸ“„ Dockerfile          # å‰ç«¯Dockeré…ç½®
â”‚   â”œâ”€â”€ ğŸ“ components/         # Reactç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ ğŸ“ lib/                # å·¥å…·åº“
â”‚   â””â”€â”€ ğŸ“ styles/             # æ ·å¼æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ“ tests/                   # æµ‹è¯•æ–‡ä»¶
â”‚   â”œâ”€â”€ ğŸ“„ README.md           # æµ‹è¯•è¯´æ˜
â”‚   â”œâ”€â”€ ğŸ“„ run_all_tests.py    # æµ‹è¯•è¿è¡Œå™¨
â”‚   â”œâ”€â”€ ğŸ“„ test_fix_verification.py    # ä¿®å¤éªŒè¯æµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“„ test_okx_api.py     # OKX APIæµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“„ test_security_fixes.py    # å®‰å…¨ä¿®å¤æµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“ integration/        # é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“ system/            # ç³»ç»Ÿæµ‹è¯•
â”‚   â”œâ”€â”€ ğŸ“ unit/              # å•å…ƒæµ‹è¯•
â”‚   â””â”€â”€ ğŸ“ utils/             # æµ‹è¯•å·¥å…·
â”‚
â”œâ”€â”€ ğŸ“ docs/                    # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ README.md           # é¡¹ç›®æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“„ TESTING_GUIDE.md    # æµ‹è¯•æŒ‡å—
â”‚   â”œâ”€â”€ ğŸ“ api/                # APIæ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“ architecture/        # æ¶æ„æ–‡æ¡£
â”‚   â”œâ”€â”€ ğŸ“ deployment/         # éƒ¨ç½²æ–‡æ¡£
â”‚   â””â”€â”€ ğŸ“ reports/            # æŠ¥å‘Šæ–‡æ¡£
â”‚       â”œâ”€â”€ ğŸ“„ error_report.md
â”‚       â”œâ”€â”€ ğŸ“„ SECURITY_AUDIT_REPORT.md
â”‚       â”œâ”€â”€ ğŸ“„ SECURITY_FIX_COMPLETION_REPORT.md
â”‚       â”œâ”€â”€ ğŸ“„ VERIFICATION_CONSISTENCY_REPORT.md
â”‚       â””â”€â”€ ğŸ“„ [å…¶ä»–æŠ¥å‘Šæ–‡ä»¶...]
â”‚
â”œâ”€â”€ ğŸ“ scripts/                 # è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“„ README.md           # è„šæœ¬è¯´æ˜
â”‚   â”œâ”€â”€ ğŸ“„ local_dev_manager.py     # æœ¬åœ°å¼€å‘ç®¡ç†å™¨
â”‚   â”œâ”€â”€ ğŸ“„ start_trading.py         # äº¤æ˜“å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ“„ log_cleanup_config.json  # æ—¥å¿—æ¸…ç†é…ç½®
â”‚   â”œâ”€â”€ ğŸ“„ REFACTORING_SUMMARY.md    # é‡æ„æ€»ç»“
â”‚   â”œâ”€â”€ ğŸ“ debug_tools/             # è°ƒè¯•å·¥å…·ç›®å½•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ debug_history.py     # å†å²æ•°æ®è°ƒè¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test_manual_trade.py # æ‰‹åŠ¨äº¤æ˜“æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ test_executor_injection.py # Executoræ³¨å…¥æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ verify_data_feed_mock.py # æ•°æ®æºæ¨¡æ‹ŸéªŒè¯
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ verify_data_feed.py  # æ•°æ®æºéªŒè¯
â”‚   â”‚   â””â”€â”€ ğŸ“„ verify_environment_config.py # ç¯å¢ƒé…ç½®éªŒè¯
â”‚   â”œâ”€â”€ ğŸ“ legacy/                  # é—ç•™å·¥å…·ç›®å½•
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ fix_bom.py          # BOMä¿®å¤å·¥å…·
â”‚   â”‚   â””â”€â”€ ğŸ“„ migrate_config.py   # é…ç½®è¿ç§»å·¥å…·
â”‚   â”œâ”€â”€ ğŸ“ deployment/              # éƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ“ maintenance/             # ç»´æŠ¤è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ“ windows/                 # Windowsè„šæœ¬
â”‚   â””â”€â”€ ğŸ“ deprecated/              # å·²å¼ƒç”¨è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“ nginx/                   # Nginxé…ç½®
â”‚   â””â”€â”€ ğŸ“„ nginx.conf          # Nginxä¸»é…ç½®
â”‚
â””â”€â”€ ğŸ“ logs/                    # æ—¥å¿—ç›®å½•
```

## ğŸ¯ æœåŠ¡æ¶æ„

### å¾®æœåŠ¡ç»„ä»¶

1. **data-service** (ç«¯å£: 8000)
   - å¸‚åœºæ•°æ®è·å–
   - WebSocketè¿æ¥ç®¡ç†
   - æŠ€æœ¯æŒ‡æ ‡è®¡ç®—

2. **risk-service** (ç«¯å£: 8001)
   - é£é™©è¯„ä¼°
   - äº¤æ˜“é™åˆ¶æ£€æŸ¥
   - è­¦æŠ¥ç®¡ç†

3. **executor-service** (ç«¯å£: 8002)
   - äº¤æ˜“æ‰§è¡Œ
   - è®¢å•ç®¡ç†
   - äº¤æ˜“è·Ÿè¸ª

4. **strategy-service** (ç«¯å£: 8003)
   - ç­–ç•¥å¼•æ“
   - AIæ¨¡å‹é›†æˆ
   - ä¿¡å·ç”Ÿæˆ

5. **frontend** (ç«¯å£: 3000)
   - Reactå‰ç«¯åº”ç”¨
   - å®æ—¶æ•°æ®å±•ç¤º
   - äº¤æ˜“ç•Œé¢

### åŸºç¡€è®¾æ–½

6. **postgres** (ç«¯å£: 5432)
   - ä¸»æ•°æ®åº“
   - æŒä¹…åŒ–å­˜å‚¨

7. **redis** (ç«¯å£: 6379)
   - ç¼“å­˜æœåŠ¡
   - ä¼šè¯å­˜å‚¨

8. **nginx** (ç«¯å£: 80/443)
   - åå‘ä»£ç†
   - è´Ÿè½½å‡è¡¡

## ğŸ”§ å¼€å‘ç¯å¢ƒè®¾ç½®

### 1. ç¯å¢ƒå˜é‡é…ç½®
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.template .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡
# é…ç½®æ•°æ®åº“ã€Redisã€APIå¯†é’¥ç­‰
```

### 2. å¯åŠ¨æœåŠ¡
```bash
# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up --build

# åå°è¿è¡Œ
docker-compose up -d --build

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f
```

### 3. è¿è¡Œæµ‹è¯•
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python tests/run_all_tests.py

# è¿è¡Œç‰¹å®šæµ‹è¯•
python tests/test_okx_api.py
python tests/test_security_fixes.py
```

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### å¥åº·æ£€æŸ¥ç«¯ç‚¹
- data-service: `http://localhost:8000/health`
- risk-service: `http://localhost:8001/health`
- executor-service: `http://localhost:8002/health`
- strategy-service: `http://localhost:8003/health`
- frontend: `http://localhost:3000`

### æ—¥å¿—ä½ç½®
- åº”ç”¨æ—¥å¿—: `./logs/`
- Dockeræ—¥å¿—: `docker-compose logs [service-name]`
- Nginxæ—¥å¿—: `./logs/nginx/`

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

1. **ç¯å¢ƒå˜é‡**: ç¡®ä¿`.env`æ–‡ä»¶ä¸è¢«æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
2. **APIå¯†é’¥**: ä½¿ç”¨å¼ºå¯†ç å¹¶å®šæœŸè½®æ¢
3. **ç½‘ç»œå®‰å…¨**: ç”Ÿäº§ç¯å¢ƒå¯ç”¨HTTPS
4. **æ•°æ®åº“**: ä½¿ç”¨å¼ºå¯†ç å’ŒSSLè¿æ¥

## ğŸš€ éƒ¨ç½²æŒ‡å—

### å¼€å‘ç¯å¢ƒ
```bash
docker-compose up --build
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
# ä½¿ç”¨ç”Ÿäº§é…ç½®
docker-compose --profile production up --build
```

## ğŸ“ ç»´æŠ¤è„šæœ¬

- `scripts/monitor_system.py` - ç³»ç»Ÿç›‘æ§
- `scripts/verify_environment_config.py` - ç¯å¢ƒéªŒè¯
- `scripts/migrate_config.py` - é…ç½®è¿ç§»

## ğŸ”„ æ¸…ç†å†å²

### æœ€æ–°æ¸…ç†å·¥ä½œ (2025-12-20)
- âœ… åˆ›å»º `scripts/debug_tools/` ç›®å½•ï¼Œç§»åŠ¨è°ƒè¯•è„šæœ¬
- âœ… åˆ›å»º `scripts/legacy/` ç›®å½•ï¼Œå½’æ¡£é—ç•™å·¥å…·
- âœ… æ¸…ç† `logs/` ç›®å½•ä¸­çš„æ‰€æœ‰å†å²æ—¥å¿—æ–‡ä»¶ (80+ ä¸ªæ–‡ä»¶)
- âœ… åˆ é™¤æ‰€æœ‰ `__pycache__/` ç¼“å­˜ç›®å½•
- âœ… åˆ é™¤è¿‡æ—¶çš„AIç›¸å…³æ–‡ä»¶ (`docs/api/AI_MODEL_SETUP.md`, `src/monitoring/ml_anomaly_detection.py`)
- âœ… ç§»åŠ¨æ ¹ç›®å½•æµ‹è¯•æŠ¥å‘Šåˆ° `docs/reports/` ç›®å½•
- âœ… ç§»åŠ¨ `conftest.py` åˆ° `tests/` ç›®å½•
- âœ… æ›´æ–° `.gitignore` æ·»åŠ è°ƒè¯•å·¥å…·å’ŒAIç›¸å…³å¿½ç•¥è§„åˆ™
- âœ… æ›´æ–°é¡¹ç›®ç»“æ„æ–‡æ¡£

### å†å²æ¸…ç†å·¥ä½œ
- âœ… åˆ é™¤ä¸´æ—¶Dockerä¿®å¤è„šæœ¬
- âœ… ç§»åŠ¨æµ‹è¯•æ–‡ä»¶åˆ°testsç›®å½•
- âœ… ç§»åŠ¨æŠ¥å‘Šæ–‡ä»¶åˆ°docs/reportsç›®å½•
- âœ… æ•´ç†é…ç½®æ–‡ä»¶åˆ°configç›®å½•
- âœ… åˆ é™¤é‡å¤çš„æ•°æ®åº“åˆå§‹åŒ–æ–‡ä»¶
- âœ… éªŒè¯é¡¹ç›®ç»“æ„å®Œæ•´æ€§

---

**æœ€åæ›´æ–°**: 2025-12-20
**ç‰ˆæœ¬**: 1.0
**ç»´æŠ¤è€…**: Athena Trader Team
