# Athena OS 环境变量配置 (v3.2 Optimized)

# ======== 基础配置 ========
ENV=production
LOG_LEVEL=INFO

# ======== 交易所 API 配置 (OKX) ========
OKX_API_KEY=your_api_key_here
OKX_SECRET_KEY=your_secret_key_here
OKX_PASSPHRASE=your_passphrase_here

# 必须为 true 才能连接 OKX 模拟盘
USE_DEMO=true

# ======== 核心资金配置 ========
# 模拟盘总本金 (根据你实际模拟盘余额填写)
TOTAL_CAPITAL=10000.0

# ======== 全局风控配置 ========
# 每次交易风险 1.0%
RISK_PER_TRADE_PCT=0.01
# 单笔最大金额 (防止模拟盘 50000U 全仓梭哈)
MAX_ORDER_AMOUNT=5000.0

# ======== 策略选择 ========
ACTIVE_STRATEGY=scalper_v1
ENABLE_SCALPER_V1=true
# 策略分配资金
SCALPER_CAPITAL=1000.0

# ======== 交易标的 ========
# 建议跑 DOGE，因为我们刚刚针对它的精度做了大量修复
SCALPER_SYMBOL=DOGE-USDT-SWAP

# ======== 信号过滤 (优化胜率) ========
# 提高门槛：每秒成交 > 8000U 才看 (过滤垃圾时间)
SCALPER_MIN_FLOW=8000.0
# 提高门槛：买单是卖单的 4 倍才进 (过滤假突破)
SCALPER_IMBALANCE_RATIO=4.0

# ======== 盈亏管理 (优化赔率) ========
# 杠杆 5x
SCALPER_LEVERAGE=5.0
# [优化] 止盈 0.5% (DOGE 波动大，0.2% 还没扣手续费就没了)
SCALPER_TAKE_PROFIT_PCT=0.005
# [优化] 止损 0.8% (给一点波动空间，避免频繁打止损)
SCALPER_STOP_LOSS_PCT=0.008
# [优化] 每日最大亏损 5%
SCALPER_DAILY_LOSS_LIMIT=0.05

# ======== 时间管理 ========
# [优化] 持仓时间延长到 2 分钟 (5秒太短了，纯送手续费)
SCALPER_TIME_LIMIT_SECONDS=120
# [优化] 挂单超时 10秒 (配合 Fix 39/40，给插队留出时间)
SCALPER_MAKER_TIMEOUT=10.0
# [优化] 冷却 5秒 (HFT模式，平仓后喘口气再战)
SCALPER_COOLDOWN_SECONDS=5.0

# ======== HFT 追单配置 (Fix 39 核心) ========
# 必须启用！否则 Fix 39 不生效
SCALPER_ENABLE_CHASING=true
# 最大追单距离 0.1% (防止追到山顶)
SCALPER_MAX_CHASE_DISTANCE=0.001

# ======== V2 追踪止损配置 ========
# [新增] 追踪止损激活阈值 0.1%
SCALPER_TRAILING_STOP_ACTIVATION_PCT=0.001
# [新增] 追踪止损回调阈值 0.05%
SCALPER_TRAILING_STOP_CALLBACK_PCT=0.0005

# ======== V2 趋势过滤配置 ========
# [新增] EMA 周期（50 ticks）
SCALPER_EMA_PERIOD=50
# [新增] 点差阈值 0.05%（Fix 41 会自动计算，但建议设置兜底）
SCALPER_SPREAD_THRESHOLD=0.0005

# ======== 订单管理配置 ========
# [新增] 订单 TTL 检查间隔（10秒）
SCALPER_TTL_ORDER_SECONDS=10.0
# [新增] 最大持仓限制（防止异常）
SCALPER_MAX_POSITION_SIZE=4.0

# ======== 持仓同步配置 ========
# [新增] 持仓同步间隔（15秒）
SCALPER_SYNC_INTERVAL_SECONDS=15.0
# [新增] 平仓锁超时（10秒）
SCALPER_CLOSE_LOCK_TIMEOUT=10.0
# [新增] 开仓请求超时（5秒）
SCALPER_PENDING_OPEN_TIMEOUT=5.0

# ======== 风控配置 ========
# [新增] 最小止损距离 0.5%（强制修正）
SCALPER_MIN_STOP_DISTANCE_PCT=0.005
# [新增] 风控拒绝冷却（1秒）
SCALPER_REJECTION_COOLDOWN_SECONDS=1.0
# [新增] ATR 止损倍数（1.5倍）
SCALPER_ATR_MULTIPLIER=1.5

# ======== 插队防抖动配置 ========
# [新增] 最小挂单存活时间（2秒）
SCALPER_MIN_ORDER_LIFE_SECONDS=2.0
# [新增] 最小插队距离 0.05%（tick_size * 5）
SCALPER_MIN_CHASING_DISTANCE_PCT=0.0005

# ======== Aggressive Maker 配置 ========
# [新增] Aggressive Maker 触发阈值（2 Ticks）
SCALPER_AGGRESSIVE_MAKER_SPREAD_TICKS=2.0
# [新增] Aggressive Maker 价格偏移（1 Tick）
SCALPER_AGGRESSIVE_MAKER_PRICE_OFFSET=1.0

# ======== 模拟盘配置 ========
# [新增] 是否为模拟盘（降低检测频率）
SCALPER_IS_PAPER_TRADING=false

# ======== 自动驾驶配置 (Fix 41 核心) ========
# [已注释] 让 Fix 41 自动从 API 获取 Tick Size (DOGE=0.00001)
# SCALPER_TICK_SIZE=0.01
