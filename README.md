# Athena Trader

## ğŸš€ ä¸“ä¸šçš„é‡åŒ–äº¤æ˜“ç³»ç»Ÿ

Athena Trader æ˜¯ä¸€ä¸ªåŸºäº Python çš„é‡åŒ–äº¤æ˜“ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§äº¤æ˜“ç­–ç•¥å’Œä»“ä½ç®¡ç†æ¨¡å‹ï¼Œé›†æˆäº†OKXäº¤æ˜“æ‰€APIï¼Œæä¾›å®Œæ•´çš„äº¤æ˜“æ‰§è¡Œã€é£é™©ç®¡ç†å’Œç›‘æ§åŠŸèƒ½ã€‚

---

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ äº¤æ˜“ç­–ç•¥
- **è¶‹åŠ¿å›è°ƒç­–ç•¥ (Trend Pullback Strategy)** - åŸºäºEMAè¶‹åŠ¿è·Ÿè¸ªå’ŒRSIè¶…å–è¶…ä¹°çš„è¶‹åŠ¿ç­–ç•¥
  - é¡ºåŠ¿è€Œä¸ºï¼Œåªåœ¨æ˜ç¡®è¶‹åŠ¿ä¸­äº¤æ˜“
  - å›è°ƒå…¥åœºï¼Œæé«˜ç›ˆäºæ¯”
  - æ”¯æŒ"ä¸æ­»é¸Ÿ"ä»“ä½ç®¡ç†æ¨¡å‹

### ğŸ¦… ä»“ä½ç®¡ç†
- **"ä¸æ­»é¸Ÿ"æ¨¡å‹ (Fixed Risk Model)** - æ¨èçš„ä»“ä½ç®¡ç†æ¨¡å‹
  - æ¯å•æœ€å¤šåªäºæœ¬é‡‘çš„ 2%
  - æ æ†ç‡æ§åˆ¶åœ¨ 2x-3x
  - åŸºäºæ­¢æŸè·ç¦»åŠ¨æ€è®¡ç®—ä»“ä½
  - ç¡®ä¿å³ä½¿è¿ç»­äºæŸ50æ¬¡ï¼Œä»æœ‰36%æœ¬é‡‘ç»§ç»­äº¤æ˜“

### âš™ï¸ æŠ€æœ¯æŒ‡æ ‡
- EMAï¼ˆæŒ‡æ•°ç§»åŠ¨å¹³å‡çº¿ï¼‰
- RSIï¼ˆç›¸å¯¹å¼ºå¼±æŒ‡æ•°ï¼‰
- å¸ƒæ—å¸¦
- æ”¯æŒè‡ªå®šä¹‰æŒ‡æ ‡

### ğŸ”§ ç³»ç»Ÿæ¶æ„
- **å•ä½“åº”ç”¨æ¨¡å¼** - æ‰€æœ‰æ¨¡å—åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­è¿è¡Œï¼ˆé€‚åˆå¼€å‘ï¼‰
- **å¾®æœåŠ¡æ¨¡å¼** - å„æœåŠ¡ç‹¬ç«‹è¿è¡Œï¼ˆé€‚åˆç”Ÿäº§ï¼‰
- FastAPI æä¾›RESTful API
- WebSocket å®æ—¶æ•°æ®æ¨é€
- å®Œå–„çš„æ—¥å¿—å’Œç›‘æ§

---

## ğŸ“‹ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Python 3.9+
- Docker (å¯é€‰ï¼Œç”¨äºå¾®æœåŠ¡æ¨¡å¼)

### å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### é…ç½®

å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿å¹¶ä¿®æ”¹ï¼š

```bash
cp .env.template .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œè®¾ç½®ä½ çš„OKX APIå¯†é’¥ï¼š

```env
OKX_API_KEY=your_api_key
OKX_API_SECRET=your_api_secret
OKX_PASSPHRASE=your_passphrase
OKX_SANDBOX=true  # ä½¿ç”¨æ¨¡æ‹Ÿç¯å¢ƒ
```

### å¯åŠ¨

#### å¼€å‘æ¨¡å¼ï¼ˆå•ä½“åº”ç”¨ï¼‰

```bash
python main_monolith.py
```

#### ç”Ÿäº§æ¨¡å¼ï¼ˆDocker Composeï¼‰

```bash
docker-compose up -d
```

---

## ğŸ“– æ–‡æ¡£

### å¿«é€Ÿå…¥é—¨
- [æœ¬åœ°å¼€å‘æŒ‡å—](docs/LOCAL_DEVELOPMENT.md) - æ¨èæ–°ç”¨æˆ·ä»è¿™é‡Œå¼€å§‹
- [ç”Ÿäº§éƒ¨ç½²æŒ‡å—](docs/PRODUCTION_DEPLOYMENT_GUIDE.md) - ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å®Œæ•´æŒ‡å—

### ç­–ç•¥æ–‡æ¡£
- [è¶‹åŠ¿å›è°ƒç­–ç•¥](docs/strategy/TREND_PULLBACK_STRATEGY.md) - å®Œæ•´çš„ç­–ç•¥æ–‡æ¡£
- [ä»“ä½ç®¡ç†æ¨¡å‹](docs/strategy/POSITION_MANAGEMENT.md) - ä»“ä½ç®¡ç†æ¨¡å‹è¯¦è§£

### æ¶æ„æ–‡æ¡£
- [ç³»ç»Ÿæ¶æ„](docs/architecture/OKX_TRADING_SYSTEM_ARCHITECTURE.md) - æ•´ä½“æ¶æ„è®¾è®¡
- [å†å²Kçº¿æ¶æ„](docs/architecture/HISTORICAL_KLINE_ARCHITECTURE.md) - æ•°æ®æ¶æ„

### å…¶ä»–æ–‡æ¡£
- [æµ‹è¯•æŒ‡å—](docs/TESTING_GUIDE.md) - æµ‹è¯•å¥—ä»¶ä½¿ç”¨è¯´æ˜
- [ç¼–ç è§„èŒƒ](docs/CODING_STANDARDS.md) - é¡¹ç›®ç¼–ç æ ‡å‡†

---

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
python -m pytest tests/ -v
```

### è¿è¡Œç‰¹å®šæµ‹è¯•

```bash
# è¶‹åŠ¿å›è°ƒç­–ç•¥æµ‹è¯•
python -m pytest tests/unit/strategy_engine/test_trend_pullback_strategy.py -v -s

# æ•°æ®ç®¡ç†å™¨æµ‹è¯•
python -m pytest tests/unit/data_manager/ -v

# é›†æˆæµ‹è¯•
python -m pytest tests/integration/ -v
```

### æµ‹è¯•è¦†ç›–ç‡

```bash
pytest --cov=src --cov-report=html
```

---

## ğŸ“Š é¡¹ç›®ç»“æ„

```
athena-trader/
â”œâ”€â”€ config/                 # é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ local.json         # æœ¬åœ°ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ development.json   # å¼€å‘ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ production.json    # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”œâ”€â”€ docs/                  # æ–‡æ¡£
â”‚   â”œâ”€â”€ strategy/         # ç­–ç•¥æ–‡æ¡£
â”‚   â”œâ”€â”€ architecture/     # æ¶æ„æ–‡æ¡£
â”‚   â””â”€â”€ deployment/      # éƒ¨ç½²æ–‡æ¡£
â”œâ”€â”€ scripts/              # è„šæœ¬å·¥å…·
â”‚   â”œâ”€â”€ start.py          # ç»Ÿä¸€å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ core/            # æ ¸å¿ƒè„šæœ¬
â”œâ”€â”€ src/                  # æºä»£ç 
â”‚   â”œâ”€â”€ data_manager/     # æ•°æ®ç®¡ç†
â”‚   â”œâ”€â”€ executor/         # äº¤æ˜“æ‰§è¡Œ
â”‚   â”œâ”€â”€ risk_manager/     # é£é™©ç®¡ç†
â”‚   â”œâ”€â”€ strategy_engine/  # ç­–ç•¥å¼•æ“
â”‚   â””â”€â”€ utils/           # å·¥å…·å‡½æ•°
â”œâ”€â”€ tests/               # æµ‹è¯•
â”‚   â”œâ”€â”€ unit/            # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/     # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ system/          # ç³»ç»Ÿæµ‹è¯•
â”œâ”€â”€ main_monolith.py     # å•ä½“åº”ç”¨å…¥å£
â”œâ”€â”€ docker-compose.yml    # Docker Compose é…ç½®
â””â”€â”€ requirements.txt     # Python ä¾èµ–
```

---

## ğŸ¯ ç­–ç•¥é…ç½®ç¤ºä¾‹

### è¶‹åŠ¿å›è°ƒç­–ç•¥é…ç½®

```json
{
  "trading": {
    "capital": 100.0,
    "max_risk_pct": 0.02,
    "trading_symbol": "SOL-USDT-SWAP",
    "use_demo": true
  },
  "strategy": {
    "type": "trend_pullback",
    "enabled": true,
    "ema_period": 144,
    "rsi_period": 14,
    "rsi_oversold": 30,
    "rsi_overbought": 70,
    "stop_loss_pct": 0.03,
    "take_profit_pct": 0.06,
    "use_bollinger_exit": true,
    "only_long": true,
    "max_leverage": 3.0,
    "min_leverage": 2.0
  }
}
```

---

## ğŸ”§ API ç«¯ç‚¹

### å¥åº·æ£€æŸ¥
```bash
curl http://localhost:8000/health
```

### è·å–å¸‚åœºæ•°æ®
```bash
curl http://localhost:8000/market/klines?symbol=SOL-USDT-SWAP&limit=100
```

### è·å–ç­–ç•¥ä¿¡å·
```bash
curl http://localhost:8000/strategy/analyze
```

---

## ğŸ“ˆ "ä¸æ­»é¸Ÿ"ä»“ä½ç®¡ç†ç¤ºä¾‹

### åœºæ™¯ï¼šSOL ä»·æ ¼ $150ï¼Œæ­¢æŸ $145

**è®¡ç®—è¿‡ç¨‹**:
```
æœ€å¤§é£é™© = $100 Ã— 2% = $2
é£é™©/å•ä½ = $150 - $145 = $5
ä»“ä½æ•°é‡ = $2 / $5 = 0.4 SOL
ä»“ä½ä»·å€¼ = 0.4 Ã— $150 = $60
æ æ†ç‡ = $60 / $100 = 0.6x
å®é™…é£é™© = 0.4 Ã— $5 = $2 (2%)
```

**ç»“æœ**:
- ä»“ä½æ•°é‡: 0.4 SOL
- ä»“ä½ä»·å€¼: $60
- æ æ†ç‡: 0.6x
- æœ€å¤§äºæŸ: $2 (2%)

---

## ğŸ› ï¸ å¸¸ç”¨å‘½ä»¤

### ç»Ÿä¸€å¯åŠ¨è„šæœ¬
```bash
# å¼€å‘ç¯å¢ƒ
python scripts/start.py dev --action start

# äº¤æ˜“ç¯å¢ƒ
python scripts/start.py trading

# æµ‹è¯•ç¯å¢ƒ
python scripts/start.py test
```

### æœ¬åœ°å¼€å‘ç®¡ç†å™¨
```bash
# å¯åŠ¨æ‰€æœ‰æœåŠ¡
python scripts/core/local_dev_manager.py start

# åœæ­¢æ‰€æœ‰æœåŠ¡
python scripts/core/local_dev_manager.py stop

# æŸ¥çœ‹çŠ¶æ€
python scripts/core/local_dev_manager.py status
```

### Windows ç”¨æˆ·
```bash
# ä¸€é”®å¯åŠ¨å¼€å‘ç¯å¢ƒ
scripts\windows\local_dev.bat

# ä¸€é”®åœæ­¢å¼€å‘ç¯å¢ƒ
scripts\windows\stop.bat
```

---

## ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

### æŸ¥çœ‹æ—¥å¿—
```bash
# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
tail -f logs/athena_trader.log

# æŸ¥çœ‹ç­–ç•¥æ—¥å¿—
tail -f logs/strategy_engine.log

# æŸ¥çœ‹äº¤æ˜“æ—¥å¿—
tail -f logs/executor.log
```

### æ€§èƒ½ç›‘æ§
```bash
curl http://localhost:8000/metrics
```

---

## ğŸ”’ å®‰å…¨å»ºè®®

1. **æ°¸è¿œä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç APIå¯†é’¥**
2. **ä½¿ç”¨ç¯å¢ƒå˜é‡æˆ–é…ç½®æ–‡ä»¶å­˜å‚¨æ•æ„Ÿä¿¡æ¯**
3. **åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨HTTPS**
4. **å®šæœŸæ›´æ–°ä¾èµ–åŒ…ä»¥ä¿®å¤å®‰å…¨æ¼æ´**
5. **é™åˆ¶APIè®¿é—®IP**
6. **ä½¿ç”¨OKXçš„IPç™½åå•åŠŸèƒ½**

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºæ”¹è¿›å»ºè®®ï¼

### è´¡çŒ®æµç¨‹
1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

### ä»£ç è§„èŒƒ
- éµå¾ª [PEP 8](https://www.python.org/dev/peps/pep-0008/) ç¼–ç è§„èŒƒ
- æ·»åŠ å•å…ƒæµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£
- ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.1.0 (2024-12-28)
- âœ¨ æ–°å¢è¶‹åŠ¿å›è°ƒç­–ç•¥
- âœ¨ æ–°å¢"ä¸æ­»é¸Ÿ"ä»“ä½ç®¡ç†æ¨¡å‹
- âœ¨ æ–°å¢äº¤æ˜“å¾ªç¯é›†æˆ
- âœ¨ æ–°å¢å®Œæ•´çš„ç­–ç•¥æ–‡æ¡£
- âœ¨ æ–°å¢ä»“ä½ç®¡ç†æ–‡æ¡£
- âœ¨ æ”¹è¿›å•å…ƒæµ‹è¯•è¦†ç›–
- ğŸ› ä¿®å¤å¤šä¸ªæµ‹è¯•é—®é¢˜

### v1.0.0 (2024-12-05)
- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ¨ åŸºç¡€æ¶æ„å®ç°
- âœ¨ OKX APIé›†æˆ
- âœ¨ åŒEMAç­–ç•¥å®ç°
- âœ¨ Dockeræ”¯æŒ

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

---

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µ: [GitHub](https://github.com/Williammmdotwo/Bot)
- é—®é¢˜åé¦ˆ: [Issues](https://github.com/Williammmdotwo/Bot/issues)
- è®¨è®ºåŒº: [Discussions](https://github.com/Williammmdotwo/Bot/discussions)

---

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºæœ¬é¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼

---

## âš ï¸ å…è´£å£°æ˜

**é‡è¦æç¤º**: æœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ å’Œç ”ç©¶ç›®çš„ã€‚é‡åŒ–äº¤æ˜“æ¶‰åŠé«˜é£é™©ï¼Œå¯èƒ½å¯¼è‡´èµ„é‡‘æŸå¤±ã€‚ä½¿ç”¨æœ¬ç³»ç»Ÿè¿›è¡Œå®ç›˜äº¤æ˜“çš„é£é™©ç”±ç”¨æˆ·è‡ªè¡Œæ‰¿æ‹…ã€‚ä½œè€…ä¸å¯¹ä»»ä½•å› ä½¿ç”¨æœ¬ç³»ç»Ÿè€Œå¯¼è‡´çš„æŸå¤±è´Ÿè´£ã€‚

**è¯·åŠ¡å¿…**:
1. å…ˆåœ¨æ¨¡æ‹Ÿç¯å¢ƒä¸­å……åˆ†æµ‹è¯•
2. ä½¿ç”¨é£é™©å¯æ§çš„èµ„é‡‘
3. ç†è§£ç­–ç•¥åŸç†å’Œé£é™©
4. ä¸è¦æŠ•å…¥è¶…å‡ºæ‰¿å—èƒ½åŠ›çš„èµ„é‡‘

---

**æœ€åæ›´æ–°**: 2024å¹´12æœˆ28æ—¥
